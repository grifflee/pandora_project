<!DOCTYPE html> 
<html> 
<head>
    <title>RDA Weather Systems</title>
    <style>
        
        /*set the background to black */
        body { 
            background-color: black; 
            color: #0b500b; 
            font-family: monospace; 
            text-align: center; 
            margin-top: 50px;

            background-size: cover; /* stretch image to fill */
            background-position: center; /* keep center of image visible */
            background-repeat: no-repeat; /*dont tile */
            transition: background-image 0.5s ease-in-out; /* fade effect */
           
        }
        button { background-color: #004400; color: #00ff00; border: 1px solid #00ff00; padding: 10px 20px; cursor: pointer; }
        button.hover {background-color: #00ff00; color: black; }

    </style>

</head>
<body>
    <!-- test --> 
    <h1> RDA SECTOR SCANNER</h1>
    <p> Target: Hallelujah Mountains</p>
    <!-- on a button click it runs the javascript scanSector function --> 
    
    <div id = "result">Waiting for data...</div>

    <button onclick="scanSector('hallelujah_mountains')">SCAN SECTOR: MOUNTAINS</button>
    <button onclick="scanSector('eastern_sea')">SCAN SECTOR: REEF</button>

<script>
        async function scanSector(sectorKey) {
            // 1. Update the status text immediately so it feels responsive
            document.getElementById("result").innerText = "CONNECTING TO SATELLITE...";
            
            // 2. Fetch data dynamically based on which button was clicked
            // Notice we put 'sectorKey' into the URL
            let response = await fetch('/get_weather/' + sectorKey);
            
            // 3. Handle the data
            if (response.ok) {
                let data = await response.json();
                document.getElementById("result").innerText = 
                    "SECTOR: " + data.location + "\n" + 
                    "TEMP: " + data.temp + "Â°C | WIND: " + data.wind + " km/h";

                    // THIS IS THE NEW PART:
                    "<span style='color: " + data.status_color + "; font-size: 1.2em; font-weight: bold;'>" +
                    "STATUS: " + data.status + 
                    "</span>";

                    //update the background image to have an actual picture
                document.body.style.backgroundImage = "url('" + data.image + "')";
            } else {
                document.getElementById("result").innerText = "SIGNAL LOST (404)";
            }
        }
    </script>

</body>


</html>